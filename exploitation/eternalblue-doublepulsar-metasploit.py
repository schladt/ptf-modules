#!/usr/bin/env python
#####################################
# Installation module for Eternalblue-Doublepulsar-Metasploit
#####################################

# AUTHOR OF MODULE NAME
AUTHOR="Mike Schladt (@mikeschladt). Metasploit module by Javier Espinosa (@jaesga)"

# DESCRIPTION OF THE MODULE
DESCRIPTION="This module will install Eternalblue-Doublepulsar-Metasploit from ElevenPaths"

# PREREQ INSTALL MODULES NEEDED FOR THIS TOOL TO WORK PROPERLY
TOOL_DEPEND="modules/exploitation/metasploit"

# INSTALL TYPE GIT, SVN, FILE DOWNLOAD
# OPTIONS = GIT, SVN, FILE
INSTALL_TYPE="GIT"

# LOCATION OF THE FILE OR GIT/SVN REPOSITORY
REPOSITORY_LOCATION="https://github.com/ElevenPaths/Eternalblue-Doublepulsar-Metasploit"

# WHERE DO YOU WANT TO INSTALL IT
INSTALL_LOCATION="eternalblue-doublepulsar-metasploit"

# DEPENDS FOR DEBIAN INSTALLS
DEBIAN="git,wine"

# DEPENDS FOR FEDORA INSTALLS
FEDORA="git,wine"

# COMMANDS TO RUN AFTER
AFTER_COMMANDS='mkdir -p $HOME/.msf4/modules/exploits/windows/smb, sed -i "s~/root/Eternalblue-Doublepulsar-Metasploit/deps~{INSTALL_LOCATION}deps~g" {INSTALL_LOCATION}eternalblue_doublepulsar.rb, sed -i "s~/root/.wine/~$HOME/.wine/~g" {INSTALL_LOCATION}eternalblue_doublepulsar.rb, cp {INSTALL_LOCATION}eternalblue_doublepulsar.rb $HOME/.msf4/modules/exploits/windows/smb/eternalblue_doublepulsar.rb,chown -R $SUDO_USER:$SUDO_USER {INSTALL_LOCATION}, chown -R $SUDO_USER:$SUDO_USER $HOME/.msf4/,su - $SUDO_USER -c "winepath", echo "EternalBlue Metasploit module added to .msf4/modules/exploits/windows/smb/eternalblue_doublepulsar.rb"'

# THIS WILL CREATE AN AUTOMATIC LAUNCHER FOR THE TOOL
LAUNCHER=""
